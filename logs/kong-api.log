warning: methods `has_role`, `add_role`, and `remove_role` are never used
   --> src/models/user.rs:127:12
    |
 67 | impl User {
    | --------- methods in this implementation
...
127 |     pub fn has_role(&self, role: &str) -> bool {
    |            ^^^^^^^^
...
133 |     pub fn add_role(&mut self, role: String) {
    |            ^^^^^^^^
...
143 |     pub fn remove_role(&mut self, role: &str) {
    |            ^^^^^^^^^^^
    |
    = note: `#[warn(dead_code)]` on by default

warning: method `mark_as_used` is never used
  --> src/models/password_reset.rs:67:12
   |
33 | impl PasswordResetToken {
   | ----------------------- method in this implementation
...
67 |     pub fn mark_as_used(&mut self) {
   |            ^^^^^^^^^^^^

warning: function `verify_password` is never used
  --> src/auth/password.rs:10:8
   |
10 | pub fn verify_password(password: &str, hash: &str) -> Result<bool, Box<dyn Error>> {
   |        ^^^^^^^^^^^^^^^

warning: function `create_log_indexes` is never used
   --> src/database/indexes.rs:140:14
    |
140 | pub async fn create_log_indexes(db: &Database) -> Result<(), String> {
    |              ^^^^^^^^^^^^^^^^^^

warning: function `create_password_reset_indexes` is never used
   --> src/database/indexes.rs:172:14
    |
172 | pub async fn create_password_reset_indexes(db: &Database) -> Result<(), String> {
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: methods `delete_user` and `list_users` are never used
   --> src/services/user_service.rs:127:18
    |
 10 | impl UserService {
    | ---------------- methods in this implementation
...
127 |     pub async fn delete_user(&self, id: &ObjectId) -> Result<bool, Box<dyn Error + Send + Sync>> {
    |                  ^^^^^^^^^^^
...
137 |     pub async fn list_users(&self, limit: Option<i64>) -> Result<Vec<User>, Box<dyn Error + Send + Sync>> {
    |                  ^^^^^^^^^^

warning: method `get_logs_by_email` is never used
   --> src/services/log_service.rs:164:18
    |
 12 | impl LogService {
    | --------------- method in this implementation
...
164 |     pub async fn get_logs_by_email(&self, email: &str, limit: Option<i64>) -> Result<Vec<LoginLog>, Box<dyn Error + Send + Sync>> {
    |                  ^^^^^^^^^^^^^^^^^

warning: methods `cleanup_expired_tokens` and `get_tokens_by_email` are never used
   --> src/services/password_reset_service.rs:76:18
    |
 11 | impl PasswordResetService {
    | ------------------------- methods in this implementation
...
 76 |     pub async fn cleanup_expired_tokens(&self) -> Result<u64, Box<dyn Error + Send + Sync>> {
    |                  ^^^^^^^^^^^^^^^^^^^^^^
...
101 |     pub async fn get_tokens_by_email(
    |                  ^^^^^^^^^^^^^^^^^^^

warning: struct `SuccessResponse` is never constructed
  --> src/api/handlers/password_reset.rs:24:12
   |
24 | pub struct SuccessResponse {
   |            ^^^^^^^^^^^^^^^

warning: function `configure_tenant_routes` is never used
   --> src/api/handlers/tenant_handlers.rs:285:8
    |
285 | pub fn configure_tenant_routes(cfg: &mut web::ServiceConfig) {
    |        ^^^^^^^^^^^^^^^^^^^^^^^

warning: field `state` is never read
  --> src/api/handlers/oauth_handlers.rs:15:5
   |
13 | pub struct OAuthCallbackQuery {
   |            ------------------ field in this struct
14 |     code: String,
15 |     state: Option<String>, // CSRF token
   |     ^^^^^

warning: struct `AuthResponse` is never constructed
  --> src/api/handlers/oauth_handlers.rs:21:12
   |
21 | pub struct AuthResponse {
   |            ^^^^^^^^^^^^

warning: struct `UserResponse` is never constructed
  --> src/api/handlers/oauth_handlers.rs:29:12
   |
29 | pub struct UserResponse {
   |            ^^^^^^^^^^^^

warning: function `configure_oauth_routes` is never used
   --> src/api/handlers/oauth_handlers.rs:405:8
    |
405 | pub fn configure_oauth_routes(cfg: &mut web::ServiceConfig) {
    |        ^^^^^^^^^^^^^^^^^^^^^^

warning: struct `AppConfig` is never constructed
 --> src/config/mod.rs:4:12
  |
4 | pub struct AppConfig {
  |            ^^^^^^^^^

warning: struct `DatabaseConfig` is never constructed
  --> src/config/mod.rs:12:12
   |
12 | pub struct DatabaseConfig {
   |            ^^^^^^^^^^^^^^

warning: struct `ServerConfig` is never constructed
  --> src/config/mod.rs:18:12
   |
18 | pub struct ServerConfig {
   |            ^^^^^^^^^^^^

warning: struct `JwtConfig` is never constructed
  --> src/config/mod.rs:24:12
   |
24 | pub struct JwtConfig {
   |            ^^^^^^^^^

warning: struct `LoggingConfig` is never constructed
  --> src/config/mod.rs:32:12
   |
32 | pub struct LoggingConfig {
   |            ^^^^^^^^^^^^^

warning: associated function `from_env` is never used
  --> src/config/mod.rs:38:12
   |
37 | impl AppConfig {
   | -------------- associated function in this implementation
38 |     pub fn from_env() -> Result<Self, env::VarError> {
   |            ^^^^^^^^

warning: struct `SecurityHeaders` is never constructed
  --> src/middleware/security.rs:11:12
   |
11 | pub struct SecurityHeaders;
   |            ^^^^^^^^^^^^^^^

warning: struct `SecurityHeadersMiddleware` is never constructed
  --> src/middleware/security.rs:31:12
   |
31 | pub struct SecurityHeadersMiddleware<S> {
   |            ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: struct `RequestLogger` is never constructed
   --> src/middleware/security.rs:107:12
    |
107 | pub struct RequestLogger;
    |            ^^^^^^^^^^^^^

warning: struct `RequestLoggerMiddleware` is never constructed
   --> src/middleware/security.rs:127:12
    |
127 | pub struct RequestLoggerMiddleware<S> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^

warning: struct `RateLimiter` is never constructed
  --> src/middleware/rate_limit.rs:14:12
   |
14 | pub struct RateLimiter {
   |            ^^^^^^^^^^^

warning: struct `RequestCounter` is never constructed
  --> src/middleware/rate_limit.rs:24:8
   |
24 | struct RequestCounter {
   |        ^^^^^^^^^^^^^^

warning: associated items `new`, `default`, `strict`, `login`, `check_rate_limit`, and `cleanup` are never used
  --> src/middleware/rate_limit.rs:30:12
   |
29 | impl RateLimiter {
   | ---------------- associated items in this implementation
30 |     pub fn new(max_requests: u32, window_secs: u64) -> Self {
   |            ^^^
...
39 |     pub fn default() -> Self {
   |            ^^^^^^^
...
44 |     pub fn strict() -> Self {
   |            ^^^^^^
...
49 |     pub fn login() -> Self {
   |            ^^^^^
...
53 |     async fn check_rate_limit(&self, key: &str) -> Result<(), String> {
   |              ^^^^^^^^^^^^^^^^
...
85 |     pub async fn cleanup(&self) {
   |                  ^^^^^^^

warning: struct `RateLimiterMiddleware` is never constructed
   --> src/middleware/rate_limit.rs:114:12
    |
114 | pub struct RateLimiterMiddleware<S> {
    |            ^^^^^^^^^^^^^^^^^^^^^

warning: struct `UserRateLimiter` is never constructed
   --> src/middleware/rate_limit.rs:166:12
    |
166 | pub struct UserRateLimiter {
    |            ^^^^^^^^^^^^^^^

warning: associated functions `new` and `default` are never used
   --> src/middleware/rate_limit.rs:171:12
    |
170 | impl UserRateLimiter {
    | -------------------- associated functions in this implementation
171 |     pub fn new(max_requests: u32, window_secs: u64) -> Self {
    |            ^^^
...
177 |     pub fn default() -> Self {
    |            ^^^^^^^

warning: struct `UserRateLimiterMiddleware` is never constructed
   --> src/middleware/rate_limit.rs:201:12
    |
201 | pub struct UserRateLimiterMiddleware<S> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `sanitize_string` is never used
  --> src/middleware/validation.rs:85:8
   |
85 | pub fn sanitize_string(input: &str) -> String {
   |        ^^^^^^^^^^^^^^^

warning: function `validate_object_id` is never used
   --> src/middleware/validation.rs:101:8
    |
101 | pub fn validate_object_id(id: &str) -> bool {
    |        ^^^^^^^^^^^^^^^^^^

warning: fields `max_connections` and `connection_timeout` are never read
  --> src/cache/redis_cache.rs:10:9
   |
 8 | pub struct CacheConfig {
   |            ----------- fields in this struct
 9 |     pub redis_url: String,
10 |     pub max_connections: usize,
   |         ^^^^^^^^^^^^^^^
11 |     pub connection_timeout: Duration,
   |         ^^^^^^^^^^^^^^^^^^
   |
   = note: `CacheConfig` has a derived impl for the trait `Clone`, but this is intentionally ignored during dead code analysis

warning: field `default_ttl` is never read
  --> src/cache/redis_cache.rs:31:5
   |
29 | pub struct RedisCache {
   |            ---------- field in this struct
30 |     pool: Pool,
31 |     default_ttl: u64,
   |     ^^^^^^^^^^^
   |
   = note: `RedisCache` has a derived impl for the trait `Clone`, but this is intentionally ignored during dead code analysis

warning: methods `set`, `exists`, `increment_with_ttl`, `ttl`, and `pool_status` are never used
   --> src/cache/redis_cache.rs:85:18
    |
 34 | impl RedisCache {
    | --------------- methods in this implementation
...
 85 |     pub async fn set<T: Serialize>(&self, key: &str, value: &T) -> Result<(), String> {
    |                  ^^^
...
124 |     pub async fn exists(&self, key: &str) -> Result<bool, String> {
    |                  ^^^^^^
...
136 |     pub async fn increment_with_ttl(&self, key: &str, ttl_seconds: u64) -> Result<i64, String> {
    |                  ^^^^^^^^^^^^^^^^^^
...
155 |     pub async fn ttl(&self, key: &str) -> Result<i64, String> {
    |                  ^^^
...
179 |     pub fn pool_status(&self) -> (usize, usize) {
    |            ^^^^^^^^^^^

warning: function `tenant_logs` is never used
   --> src/cache/redis_cache.rs:199:12
    |
199 |     pub fn tenant_logs(tenant_id: &str, page: u32) -> String {
    |            ^^^^^^^^^^^

warning: function `tenant_pattern` is never used
   --> src/cache/redis_cache.rs:209:12
    |
209 |     pub fn tenant_pattern(tenant_id: &str) -> String {
    |            ^^^^^^^^^^^^^^

warning: `kong-security-api` (bin "kong-security-api") generated 38 warnings
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 2.86s
warning: the following packages contain code that will be rejected by a future version of Rust: redis v0.24.0
note: to see what the problems were, use the option `--future-incompat-report`, or run `cargo report future-incompatibilities --id 3`
     Running `target/debug/kong-security-api`
  âœ“ Tenant indexes created
  âœ“ User indexes created
âœ… Database indexes initialized successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          ğŸš€ Kong Security API - Server Started              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ“ Server URL:    http://localhost:8080/api                â•‘
â•‘  ğŸ“Š Swagger UI:    http://localhost:8080/api/swagger-ui/    â•‘
â•‘  ğŸ“– OpenAPI Spec:  http://localhost:8080/api/api-docs/openapi.json â•‘
â•‘  â¤ï¸  Health Check:  http://localhost:8080/api/health         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ”’ Security Features Enabled:                              â•‘
â•‘     âœ… CORS Protection                                       â•‘
â•‘     âœ… JWT RS256 Authentication                              â•‘
â•‘     âœ… BCrypt Password Hashing                               â•‘
â•‘     âœ… Input Validation & Sanitization                       â•‘
â•‘     âœ… Password Strength Requirements                        â•‘
â•‘     âœ… SQL Injection Prevention                              â•‘
â•‘     âœ… XSS Prevention                                        â•‘
â•‘     âœ… Comprehensive Audit Logging                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  âš¡ Performance Features:                                    â•‘
â•‘     âœ… Redis Cache (Tenants & Logs)
â•‘     âœ… MongoDB Connection Pooling (max 10)                   â•‘
â•‘     âœ… Response Compression (gzip/brotli)                    â•‘
â•‘     âœ… Optimized Database Queries                            â•‘
â•‘     âœ… Zstd/Snappy MongoDB Compression                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Login log saved successfully for email: ccharlesroberto@gmail.com
ğŸ”„ Redirecting to oauth-callback.html:
   User ID: 6950290f5d594da225720e58
   Email: ccharlesroberto@gmail.com
